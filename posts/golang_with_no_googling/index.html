<!DOCTYPE html>
<html>
  <head>
    <title>blog</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-03-18T14:43:41 EDT">
<title>Golang with no Googling :: blog</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/kondor6c.github.io\/";
</script>
<meta name="description" content="As an exercise, I tried writing Go without Googling">



    
  </head>
  <body data-url="/posts/golang_with_no_googling/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://kondor6c.github.io/">blog</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/kondor6c/"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github repo</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/posts/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/posts/">Posts</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/posts/golang_with_no_googling/" class="dd-item active">
        <div>
          <a href="/posts/golang_with_no_googling/">
            Golang with no Googling
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/gnutls_ed25519/" class="dd-item">
        <div>
          <a href="/posts/gnutls_ed25519/">
            GnuTLS and ed25519
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/end_of_disk_issues/" class="dd-item">
        <div>
          <a href="/posts/end_of_disk_issues/">
            An End of Disk Issues?
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/self-2018/" class="dd-item">
        <div>
          <a href="/posts/self-2018/">
            SELF 2018
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/resume-blogging/" class="dd-item">
        <div>
          <a href="/posts/resume-blogging/">
            Resume Blogging
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/openssl-video/" class="dd-item">
        <div>
          <a href="/posts/openssl-video/">
            OpenSSL Video
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/urxvt_vs_eterm/" class="dd-item">
        <div>
          <a href="/posts/urxvt_vs_eterm/">
            urxvt_vs_eterm
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/hurricane_matthew_weekend/" class="dd-item">
        <div>
          <a href="/posts/hurricane_matthew_weekend/">
            Hurricane Matthew Weekend
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/options-vs-arguments-vs-parameters/" class="dd-item">
        <div>
          <a href="/posts/options-vs-arguments-vs-parameters/">
            options-vs-arguments-vs-parameters
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/give_emacs_another_try/" class="dd-item">
        <div>
          <a href="/posts/give_emacs_another_try/">
            Emacs
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/standardization/" class="dd-item">
        <div>
          <a href="/posts/standardization/">
            standardization
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/powershell_linux_debut/" class="dd-item">
        <div>
          <a href="/posts/powershell_linux_debut/">
            powershell_linux_debut
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/modern-marvels-engineering-disasters/" class="dd-item">
        <div>
          <a href="/posts/modern-marvels-engineering-disasters/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/btrfs_total_failure/" class="dd-item">
        <div>
          <a href="/posts/btrfs_total_failure/">
            RAID5 btrfs total failure and subsequent abandonment
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/bash_tips1/" class="dd-item">
        <div>
          <a href="/posts/bash_tips1/">
            bash tips 1
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/white_spaces_can_be_dangerous/" class="dd-item">
        <div>
          <a href="/posts/white_spaces_can_be_dangerous/">
            white_spaces_can_be_dangerous
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/tiddlywiki_entry_everyday_for_30_days/" class="dd-item">
        <div>
          <a href="/posts/tiddlywiki_entry_everyday_for_30_days/">
            tiddlywiki_entry_everyday_for_30_days
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/x2go_or_freenx/" class="dd-item">
        <div>
          <a href="/posts/x2go_or_freenx/">
            x2go or FreeNX
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/tls_in_practice/" class="dd-item">
        <div>
          <a href="/posts/tls_in_practice/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/btrfs_scrub_fail/" class="dd-item">
        <div>
          <a href="/posts/btrfs_scrub_fail/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/posts/pyenv/" class="dd-item">
        <div>
          <a href="/posts/pyenv/">
            pyenv
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/posts/" >
   Posts</option> 
      <option value="/posts/golang_with_no_googling/"  selected>- Golang with no Googling</option>
      <option value="/posts/gnutls_ed25519/" >- GnuTLS and ed25519</option>
      <option value="/posts/end_of_disk_issues/" >- An End of Disk Issues?</option>
      <option value="/posts/self-2018/" >- SELF 2018</option>
      <option value="/posts/resume-blogging/" >- Resume Blogging</option>
      <option value="/posts/openssl-video/" >- OpenSSL Video</option>
      <option value="/posts/urxvt_vs_eterm/" >- urxvt_vs_eterm</option>
      <option value="/posts/hurricane_matthew_weekend/" >- Hurricane Matthew Weekend</option>
      <option value="/posts/options-vs-arguments-vs-parameters/" >- options-vs-arguments-vs-parameters</option>
      <option value="/posts/give_emacs_another_try/" >- Emacs</option>
      <option value="/posts/standardization/" >- standardization</option>
      <option value="/posts/powershell_linux_debut/" >- powershell_linux_debut</option>
      <option value="/posts/modern-marvels-engineering-disasters/" >- </option>
      <option value="/posts/btrfs_total_failure/" >- RAID5 btrfs total failure and subsequent abandonment</option>
      <option value="/posts/bash_tips1/" >- bash tips 1</option>
      <option value="/posts/white_spaces_can_be_dangerous/" >- white_spaces_can_be_dangerous</option>
      <option value="/posts/tiddlywiki_entry_everyday_for_30_days/" >- tiddlywiki_entry_everyday_for_30_days</option>
      <option value="/posts/x2go_or_freenx/" >- x2go or FreeNX</option>
      <option value="/posts/tls_in_practice/" >- </option>
      <option value="/posts/btrfs_scrub_fail/" >- </option>
      <option value="/posts/pyenv/" >- pyenv</option>
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/kondor6c.github.io\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Golang with no Googling</h1>
    
    
    
    <div class="document">


<p>I spent a good amount of time learning Golang (Go, but since using two letters in any form of a search usually is an exercise in futility). My goal was fairly simple, I wanted to display some system statistics via HTTP by reading them directly from /proc. I saw that Golang had a module in the standard library call &quot;syscall&quot; and I decided that it might be fun to give that a try. Since I have seen a fair amount of syscalls by using strace and could always use trusty man pages, I thought this might be interesting and I might learn something in the process. I also was feeling fairly confident with the langauge after ingesting data from the web with Bleve (Golang Elasticsearch). It seems many of my results have been from Medium or StackOverflow, I really don't care for Medium, I get the feeling that it is tracking me; additionally the annoying notification that I need to sign up reminds me of Quora.
I knew from experience that generally I would need to stat the file, then read and write to the location I wanted. A fairly easy operation, having considered all things that could be involved. I could probably even skip the stat since I know it is there and that I can open it. To check my thought process and keeping with my no internet searching exercise, I did an strace on cat just to check my thought process.</p>
<pre class="literal-block">
execve(&quot;/bin/cat&quot;, [&quot;cat&quot;, &quot;/proc/interrupts&quot;], 0x7ffd84c42188 /* 82 vars */) = 0
brk(NULL)                               = 0x560adc986000
access(&quot;/etc/ld.so.preload&quot;, R_OK)      = -1 ENOENT (No such file or directory)
openat(AT_FDCWD, &quot;/etc/ld.so.cache&quot;, O_RDONLY|O_CLOEXEC) = 3
fstat(3LL, 1886056, PROT_READ, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f6688407000
mprotect(0x7f6688429000, 1708032, PROT_NONE) = 0
mmap(0x7f6688429000, 1404928, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x22000) = 0x7f6688429000
mmap(0x7f6688580000, 299008, PROT_READ, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x179000) = 0x7f6688580000
mmap(0x7f66885ca000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1c2000) = 0x7f66885ca000
mmap(0x7f66885d0000, 14184, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f66885d0000
close(3)                                = 0
arch_prctl(ARCH_SET_FS, 0x7f66885d5540) = 0
mprotect(0x7f66885ca000, 16384, PROT_READ) = 0
mprotect(0x560adba2a000, 4096, PROT_READ) = 0
mprotect(0x7f6688637000, 4096, PROT_READ) = 0
munmap(0x7f66885d6000, 236364)          = 0
brk(NULL)                               = 0x560adc986000
brk(0x560adc9a7000)                     = 0x560adc9a7000
openat(AT_FDCWD, &quot;/usr/lib64/locale/locale-archive&quot;, O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=4554608, ...}) = 0
mmap(NULL, 4554608, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f6687faf000
close(3)                                = 0
fstat(1, {st_mode=S_IFCHR|0600, st_rdev=makedev(0x88, 0x2), ...}) = 0
openat(AT_FDCWD, &quot;/proc/interrupts&quot;, O_RDONLY) = 3
fstat(3, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
fadvise64(3, 0, 0, POSIX_FADV_SEQUENTIAL) = 0
</pre>
<p>Pretty trivial, as I thought, but I looked at the AT_FDCWD. This is due to the fact the file being opened might be relative. I then tried to use Golang to grab the current working directory. Using Godoc this was my simple result.</p>
<pre class="code go literal-block">
<span class="keyword namespace">package</span> <span class="name other">main</span>

<span class="comment single">// an exercise where I am not going to &quot;google&quot; anything, use only reference docs
</span>
<span class="keyword namespace">import</span> <span class="punctuation">(</span>
      <span class="literal string">&quot;fmt&quot;</span>
      <span class="literal string">&quot;syscall&quot;</span>
<span class="punctuation">)</span>

<span class="keyword declaration">func</span> <span class="name other">main</span><span class="punctuation">()</span> <span class="punctuation">{</span>
      <span class="keyword declaration">var</span> <span class="name other">cwd_fd</span> <span class="keyword type">int</span>
      <span class="keyword declaration">var</span> <span class="name other">err</span> <span class="keyword type">error</span>
      <span class="name other">cwd_fd</span><span class="punctuation">,</span> <span class="name other">err</span> <span class="operator">:=</span> <span class="name other">syscall</span><span class="punctuation">.</span><span class="name other">Getcwd</span><span class="punctuation">([]</span><span class="name builtin">byte</span><span class="punctuation">(</span><span class="literal string">&quot;/&quot;</span><span class="punctuation">))</span>
      <span class="keyword">if</span> <span class="name other">err</span> <span class="operator">!=</span> <span class="keyword constant">nil</span> <span class="punctuation">{</span>
              <span class="name builtin">panic</span><span class="punctuation">(</span><span class="name other">err</span><span class="punctuation">)</span>
      <span class="punctuation">}</span>
      <span class="name other">fmt</span><span class="punctuation">.</span><span class="name other">Println</span><span class="punctuation">(</span><span class="name other">cwd_fd</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</pre>
<p>Upon running this I got a panic, err was hit and it said that</p>
<div class="line-block">
<div class="line">panic: numerical result out of range</div>
</div>
<p>I double checked Godoc and it does return and int, I tried an int64 and that was indeed the wrong type, I also tried to automatically assign the type using good ole &quot;:=&quot; and got the same result. I still plan on continuing this exercise, maybe even have this little project/program be specifically dedicated to not searching. Like a search free clean room implementation. I still don't know if others have encountered this, but the syscall page doesn't have much for documentation (probably because many of these are already standard and documented elsewhere). The overview of the docs does say that this module is deprecated, but I wonder why it won't work at all, I also wonder if the GCC Go might have a different result. Another fun excercise might be to compare the benchmarks of both to see which might perform better. I would think that the syscall might since there isn't any guessing or fringe attempts that would be going on. This attempt was neat to do and I actually recommend it! Have fun.</p>
</div>

    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/posts/" title="Posts"> <i class="fa fa-chevron-left"></i><label>Posts</label></a>
    <a class="nav nav-next" href="/posts/gnutls_ed25519/" title="GnuTLS and ed25519" style="margin-right: 0px;"><label>GnuTLS and ed25519</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    
    <div class="tags"> 
      
        <a class="label label-default" href="https://kondor6c.github.io/tags/golang">golang</a>
      
        <a class="label label-default" href="https://kondor6c.github.io/tags/learning">learning</a>
      
        <a class="label label-default" href="https://kondor6c.github.io/tags/linux">linux</a>
      
    </div>
    

    

    
    <div class="date">
        <i class='fa fa-calendar'></i> Last update on 17/03/2019
    </div>
    

    
    <div class="github-link">
      <a href="https://github.com/kondor6c/contentposts/Golang_with_no_googling.rst" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
    
  </div>


	<div>


  
    Create a content/_footer.md file to customize the footer content
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>